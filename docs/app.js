webpackJsonp([0],[function(t,e,i){i(1),i(6),i(7)},function(t,e,i){var n=i(2);"string"==typeof n&&(n=[[t.i,n,""]]);var a={};a.transform=void 0;i(4)(n,a);n.locals&&(t.exports=n.locals)},function(t,e,i){(t.exports=i(3)(!1)).push([t.i,'#map,body,html{height:100%}#banner,#map{width:100%;background-color:#fff}#legend,#map{position:absolute}#banner,#legend{background-repeat:no-repeat}body,html{width:100%;margin:0;padding:0;overflow:hidden}.fontfix{font-family:Arial,\\\\5FAE\\8F6F\\96C5\\9ED1,Hiragino Sans GB,\\\\65B0\\5B8B\\4F53,sans-serif;-webkit-font-smoothing:antialiased}.no-select{-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}#banner{height:0;background-position:0 0}#mapcontainer{position:relative;width:100%;height:100%}.leaflet-container{background:#fff}.pictures{margin:0;margin-top:10px;padding:0;list-style:none;max-width:30rem;display:flex;justify-content:start;white-space:pre-wrap;flex-wrap:wrap;min-width:262px}.pictures:after{display:table;content:" ";clear:both}.pictures>li{margin:0 5px 2px 0;border:1px solid transparent;overflow:hidden}.pictures>li>img{width:100%;cursor:-webkit-zoom-in;cursor:zoom-in}.viewer-download{color:#fff;font-family:FontAwesome;font-size:.75rem;line-height:1.5rem;text-align:center}.viewer-download:before{content:"\\F019"}ul.pictures li img{width:80px;height:80px}.leaflet-popup-content{width:auto!important}',""])},function(t,e){t.exports=function(t){var e=[];return e.toString=function(){return this.map(function(e){var i=function(t,e){var i=t[1]||"",n=t[3];if(!n)return i;if(e&&"function"==typeof btoa){var a=(r=n,"/*# sourceMappingURL=data:application/json;charset=utf-8;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(r))))+" */"),o=n.sources.map(function(t){return"/*# sourceURL="+n.sourceRoot+t+" */"});return[i].concat(o).concat([a]).join("\n")}var r;return[i].join("\n")}(e,t);return e[2]?"@media "+e[2]+"{"+i+"}":i}).join("")},e.i=function(t,i){"string"==typeof t&&(t=[[null,t,""]]);for(var n={},a=0;a<this.length;a++){var o=this[a][0];"number"==typeof o&&(n[o]=!0)}for(a=0;a<t.length;a++){var r=t[a];"number"==typeof r[0]&&n[r[0]]||(i&&!r[2]?r[2]=i:i&&(r[2]="("+r[2]+") and ("+i+")"),e.push(r))}},e}},function(t,e,i){var n={},a=function(t){var e;return function(){return void 0===e&&(e=t.apply(this,arguments)),e}}(function(){return window&&document&&document.all&&!window.atob}),o=function(t){var e={};return function(t){return void 0===e[t]&&(e[t]=function(t){return document.querySelector(t)}.call(this,t)),e[t]}}(),r=null,s=0,l=[],h=i(5);t.exports=function(t,e){if("undefined"!=typeof DEBUG&&DEBUG&&"object"!=typeof document)throw new Error("The style-loader cannot be used in a non-browser environment");(e=e||{}).attrs="object"==typeof e.attrs?e.attrs:{},e.singleton||(e.singleton=a()),e.insertInto||(e.insertInto="head"),e.insertAt||(e.insertAt="bottom");var i=u(t,e);return c(i,e),function(t){for(var a=[],o=0;o<i.length;o++){var r=i[o];(s=n[r.id]).refs--,a.push(s)}if(t){c(u(t,e),e)}for(o=0;o<a.length;o++){var s;if(0===(s=a[o]).refs){for(var l=0;l<s.parts.length;l++)s.parts[l]();delete n[s.id]}}}};function c(t,e){for(var i=0;i<t.length;i++){var a=t[i],o=n[a.id];if(o){o.refs++;for(var r=0;r<o.parts.length;r++)o.parts[r](a.parts[r]);for(;r<a.parts.length;r++)o.parts.push(m(a.parts[r],e))}else{var s=[];for(r=0;r<a.parts.length;r++)s.push(m(a.parts[r],e));n[a.id]={id:a.id,refs:1,parts:s}}}}function u(t,e){for(var i=[],n={},a=0;a<t.length;a++){var o=t[a],r=e.base?o[0]+e.base:o[0],s={css:o[1],media:o[2],sourceMap:o[3]};n[r]?n[r].parts.push(s):i.push(n[r]={id:r,parts:[s]})}return i}function f(t,e){var i=o(t.insertInto);if(!i)throw new Error("Couldn't find a style target. This probably means that the value for the 'insertInto' parameter is invalid.");var n=l[l.length-1];if("top"===t.insertAt)n?n.nextSibling?i.insertBefore(e,n.nextSibling):i.appendChild(e):i.insertBefore(e,i.firstChild),l.push(e);else{if("bottom"!==t.insertAt)throw new Error("Invalid value for parameter 'insertAt'. Must be 'top' or 'bottom'.");i.appendChild(e)}}function d(t){if(null===t.parentNode)return!1;t.parentNode.removeChild(t);var e=l.indexOf(t);e>=0&&l.splice(e,1)}function p(t){var e=document.createElement("style");return t.attrs.type="text/css",_(e,t.attrs),f(t,e),e}function _(t,e){Object.keys(e).forEach(function(i){t.setAttribute(i,e[i])})}function m(t,e){var i,n,a,o;if(e.transform&&t.css){if(!(o=e.transform(t.css)))return function(){};t.css=o}if(e.singleton){var l=s++;i=r||(r=p(e)),n=g.bind(null,i,l,!1),a=g.bind(null,i,l,!0)}else t.sourceMap&&"function"==typeof URL&&"function"==typeof URL.createObjectURL&&"function"==typeof URL.revokeObjectURL&&"function"==typeof Blob&&"function"==typeof btoa?(i=function(t){var e=document.createElement("link");return t.attrs.type="text/css",t.attrs.rel="stylesheet",_(e,t.attrs),f(t,e),e}(e),n=function(t,e,i){var n=i.css,a=i.sourceMap,o=void 0===e.convertToAbsoluteUrls&&a;(e.convertToAbsoluteUrls||o)&&(n=h(n));a&&(n+="\n/*# sourceMappingURL=data:application/json;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(a))))+" */");var r=new Blob([n],{type:"text/css"}),s=t.href;t.href=URL.createObjectURL(r),s&&URL.revokeObjectURL(s)}.bind(null,i,e),a=function(){d(i),i.href&&URL.revokeObjectURL(i.href)}):(i=p(e),n=function(t,e){var i=e.css,n=e.media;n&&t.setAttribute("media",n);if(t.styleSheet)t.styleSheet.cssText=i;else{for(;t.firstChild;)t.removeChild(t.firstChild);t.appendChild(document.createTextNode(i))}}.bind(null,i),a=function(){d(i)});return n(t),function(e){if(e){if(e.css===t.css&&e.media===t.media&&e.sourceMap===t.sourceMap)return;n(t=e)}else a()}}var v=function(){var t=[];return function(e,i){return t[e]=i,t.filter(Boolean).join("\n")}}();function g(t,e,i,n){var a=i?"":n.css;if(t.styleSheet)t.styleSheet.cssText=v(e,a);else{var o=document.createTextNode(a),r=t.childNodes;r[e]&&t.removeChild(r[e]),r.length?t.insertBefore(o,r[e]):t.appendChild(o)}}},function(t,e){t.exports=function(t){var e="undefined"!=typeof window&&window.location;if(!e)throw new Error("fixUrls requires window.location");if(!t||"string"!=typeof t)return t;var i=e.protocol+"//"+e.host,n=i+e.pathname.replace(/\/[^\/]*$/,"/");return t.replace(/url\s*\(((?:[^)(]|\((?:[^)(]+|\([^)(]*\))*\))*)\)/gi,function(t,e){var a=e.trim().replace(/^"(.*)"$/,function(t,e){return e}).replace(/^'(.*)'$/,function(t,e){return e});if(/^(#|data:|http:\/\/|https:\/\/|file:\/\/\/)/i.test(a))return t;var o;return o=0===a.indexOf("//")?a:0===a.indexOf("/")?i+a:n+a.replace(/^\.\//,""),"url("+JSON.stringify(o)+")"})}},function(t,e){L.CanvasLayer=L.Class.extend({includes:[L.Mixin.Events],options:{fill:!0,fillColor:"rgba(51, 153, 255, 0.25)",stroke:!0,color:"rgba(51, 153, 255, 0.5)",weight:1,clickable:!0,zoomAnimation:!0,redrawWhenMove:!1},initialize:function(t){L.setOptions(this,t)},onAdd:function(t){this._map=t,this._initCanvas(),this._initEvents(),t.getPanes().overlayPane.appendChild(this._canvas),this.options.redrawWhenMove&&t.on("move",this.redraw,this),t.on("moveend",this.redraw,this),this._draw()},onRemove:function(t){t.getPanes().overlayPane.removeChild(this._canvas),t.off("moveend",this.redraw,this),this.options.redrawWhenMove&&t.off("move",this.redraw,this),this.options.clickable&&t.off({mousemove:this._mouseMove,click:this._click},this),this.options.zoomAnimation&&L.Browser.any3d&&t.off({zoomanim:this._animateZoom,zoomend:this._endZoom},this)},addTo:function(t){return t.addLayer(this),this},setData:function(t){this._data=t,this.redraw()},redraw:function(){this._draw()},_draw:function(){this._map&&this._canvas&&(this._updateCanvasViewport(),this._update())},_update:function(){},_initCanvas:function(){this._canvas=L.DomUtil.create("canvas"),this._canvas.style.position="absolute",this.options.zoomAnimation&&L.Browser.any3d?(this._canvas.className="leaflet-zoom-animated",this._map.on("zoomanim",this._animateZoom,this),this._map.on("zoomend",this._endZoom,this)):this._canvas.className="leaflet-zoom-hide"},_initEvents:function(){this.options.clickable&&(this._map.on("mousemove",this._mouseMove,this),this._map.on("click",this._click,this))},_mouseMove:function(t){if(this._map&&!this._zooming){this._getFeature(t.layerPoint)?(this._canvas.style.cursor="pointer",this._mouseInside=!0,this.fire("mouseover",t)):this._mouseInside&&(this._canvas.style.cursor="",this._mouseInside=!1,this.fire("mouseout",t))}},_click:function(t){if(!this._map.dragging||!this._map.dragging.moved()){var e=this._getFeature(t.layerPoint);e&&(t.feature=e,this.fire("click",t))}},_updateCanvasViewport:function(){this._zooming||(this._updateViewport(),L.DomUtil.setPosition(this._canvas,this._viewport.min))},_updateViewport:function(){var t=this._map.getSize(),e=L.DomUtil.getPosition(this._map._mapPane).multiplyBy(-1)._round(),i=e.add(t.multiplyBy(1)._round());this._canvas.width=t.x,this._canvas.height=t.y,this._viewport=new L.Bounds(e,i)},_animateZoom:function(t){var e=this._map.getZoomScale(t.zoom),i=this._map._getCenterOffset(t.center)._multiplyBy(-e)._add(this._viewport.min);this._canvas.style[L.DomUtil.TRANSFORM]=L.DomUtil.getTranslateString(i)+" scale("+e+") ",this._zooming=!0},_endZoom:function(){this._zooming=!1},_getFeature:function(t){for(var e,i=this._projs||[],n=0;n<i.length;n++)if(e=i[n],e&&this._containsPoint(e,t))return this._data.features[n];return null},_controlPoint:function(t,e){var i=(t.x+e.x)/2,n=(t.y+e.y)/2,a=Math.sqrt(Math.pow(t.x-e.x,2)+Math.pow(t.y-t.y,2))/5;if(t.x===e.x)return t.y>e.y?[i-a,n]:[i+a,n];if(t.y===e.y)return t.x>e.x?{x:i,y:n+a}:{x:i,y:n-a};var o=i+(e.y-t.y)/5;return{x:o,y:n+(i-o)*(t.x-i)/(t.y-n)}},_latLng2Screen:function(t,e){var i=this._map.latLngToLayerPoint(new L.latLng(t,e));return this._map.layerPointToContainerPoint(i)._round()}}),L.CanvasLayer.Flow=L.CanvasLayer.extend({options:{reverse:!1,clickable:!1,asyn:!1},_beziers:[],_controls:[],_flowend:!1,_animid:null,initialize:function(t){L.CanvasLayer.prototype.initialize.call(this,t)},onRemove:function(t){this.clear(),L.CanvasLayer.prototype.onRemove.call(this,t)},setData:function(t){this.stop(),this._data=t,this._updateBeziers(),this.options.asyn?this._animateAsyn():this._animate()},_update:function(){if(this._data){if(this._updateBeziers(),!this._flowend)return void(this.options.asyn?this._animateAsyn():this._animate());var t,e,i=this._map.getSize(),n=this._canvas.getContext("2d"),a=this._data.geo;this.options.reverse?(t=this._data.to,e=this._data.from):(t=this._data.from,e=this._data.to);this.options;var o,r,s,l,h=a[t],c=this._latLng2Screen(h[1],h[0]);n.clearRect(0,0,i.x,i.y);for(var u=0;u<e.length;u++)o=a[e[u]],r=this._latLng2Screen(o[1],o[0]),s=this._controls[u],l=this._beziers[u],n.lineWidth=0,n.strokeStyle="rgba(255, 255, 255, 0)",this._curve(n,c,s,r),n.lineWidth=0,n.strokeStyle=this._color(u,0),this._curve(n,c,s,r),n.fillStyle=this._color(u,0),this._arrow(n,l[l.length-1],l[l.length-2])}},_animate:function(){if(this._data){this._animid&&(L.Util.cancelAnimFrame(this._animid),this._animid=null);var t,e=this._map.getSize(),i=this._canvas.getContext("2d"),n=this._beziers,a=this.options,o=this,r=0,s=function(){if(40>=++r){i.clearRect(0,0,e.x,e.y);for(var l=0;l<n.length;l++)t=n[l].slice(0,r),i.lineWidth=a.weight+4,i.strokeStyle="rgba(255, 255, 255,0)",o._line(i,t),i.lineWidth=a.weight,i.strokeStyle=o._color(l,0),o._line(i,t),r>1&&(i.fillStyle=o._color(l,0),o._arrow(i,t[t.length-1],t[t.length-2]));o._animid=L.Util.requestAnimFrame(s,o)}else L.Util.cancelAnimFrame(o._animid),o._flowend=!0,o._update(),o.fire("flowend",{data:o._data})};this._animid=L.Util.requestAnimFrame(s,this)}},_animateAsyn:function(){if(this._data){this._animid&&(L.Util.cancelAnimFrame(this._animid),this._animid=null);var t,e,i,n,a,o=this._map.getSize(),r=this._canvas.getContext("2d"),s=this._beziers,l=this.options,h=this,c=0,u=0;for(t=0;t<s.length;t++)u+=s[t].length;var f=function(){if(u>=++c){for(r.clearRect(0,0,o.x,o.y),i=0,n=c,t=0;t<s.length&&!((n-=s[t].length)<=0);t++)++i;for(n+=s[i].length,e=0;i>e;e++)a=s[e],r.lineWidth=l.weight+4,r.strokeStyle="rgba(255, 255, 255, 0.15)",h._line(r,a),r.lineWidth=l.weight,r.strokeStyle=h._color(e,.8),h._line(r,a),r.fillStyle=h._color(e,1),h._arrow(r,a[a.length-1],a[a.length-2]);n>1&&(a=s[e].slice(0,n),r.lineWidth=l.weight+4,r.strokeStyle="rgba(255, 255, 255, 0.15)",h._line(r,a),r.lineWidth=l.weight,r.strokeStyle=h._color(e,.8),h._line(r,a),r.fillStyle=h._color(e,1),h._arrow(r,a[a.length-1],a[a.length-2])),h._animid=L.Util.requestAnimFrame(f,h)}else L.Util.cancelAnimFrame(h._animid),h._flowend=!0,h._update(),h.fire("flowend",{data:h._data})};this._animid=L.Util.requestAnimFrame(f,this)}},_curve:function(t,e,i,n){t.beginPath(),t.moveTo(e.x,e.y),t.quadraticCurveTo(i.x,i.y,n.x,n.y),t.stroke(),t.closePath()},_line:function(t,e){if(e&&!(e.length<1)){t.beginPath(),t.moveTo(e[0][0],e[0][1]);for(var i=1;i<e.length;i++)t.lineTo(e[i][0],e[i][1]);t.stroke(),t.closePath()}},_arrow:function(t,e,i){var n=this._angle(e,i),a=this._arrowPoints(e);t.save(),t.beginPath(),t.translate(e[0],e[1]),t.moveTo(0,0),t.rotate(n);for(var o=0;o<a.length;o++)t.lineTo(a[o].x-e[0],a[o].y-e[1]);t.fill(),t.restore()},_angle:function(t,e){return t[0]===e[0]?t[1]>e[1]?Math.PI:0:t[1]===e[1]?t[0]<e[0]?-Math.PI/2:Math.PI/2:t[0]<e[0]?t[1]<e[1]?-Math.atan((e[0]-t[0])/(e[1]-t[1])):-Math.PI/2-Math.atan((e[1]-t[1])/(t[0]-e[0])):t[1]<e[1]?Math.atan((t[0]-e[0])/(e[1]-t[1])):Math.PI/2+Math.atan((t[1]-e[1])/(t[0]-e[0]))},_arrowPoints:function(t){var e={},i={},n={},a=Math.sqrt(3);return i.x=t[0],i.y=t[1]+8,e.x=Math.round(t[0]-8*a/2),n.x=Math.round(t[0]+8*a/2),e.y=n.y=t[1]+12,[e,i,n]},_updateBeziers:function(){this._beziers=[],this._controls=[];var t,e,i=this._data.geo;this.options.reverse?(t=this._data.to,e=this._data.from):(t=this._data.from,e=this._data.to);for(var n,a,o,r,s=i[t],l=this._latLng2Screen(s[1],s[0]),h=0;h<e.length;h++)n=i[e[h]],a=this._latLng2Screen(n[1],n[0]),this.options.reverse?(o=this._controlPoint(a,l),r=this._bezier(a,o,l)):(o=this._controlPoint(l,a),r=this._bezier(l,o,a)),this._beziers.push(r),this._controls.push(o)},_bezier:function(t,e,i){for(var n,a,o,r=[],s=0;1>=s;s+=.025)n=Math.pow(1-s,2)*t.x+2*s*(1-s)*e.x+Math.pow(s,2)*i.x,a=Math.pow(1-s,2)*t.y+2*s*(1-s)*e.y+Math.pow(s,2)*i.y,r.length>0&&(o=r[r.length-1],o[0]===n&&o[1]===a)||r.push([n,a]);return((o=r[r.length-1])[0]!==i.x||o[1]!==i.y)&&r.push([i.x,i.y]),r},_color:function(t,e){var i=this._data.colors;return"rgba("+i[t%i.length].concat(e).join(",")+")"},stop:function(){this._animid&&(L.Util.cancelAnimFrame(this._animid),this._animid=null);var t=this._map.getSize();this._canvas.getContext("2d").clearRect(0,0,t.x,t.y),this._flowend=!1},clear:function(){this.stop(),this._data=null}}),L.CanvasLayer.flow=function(t){return new L.CanvasLayer.Flow(t)},L.CanvasLayer.MovingCircle=L.CanvasLayer.extend({options:{reverse:!1,clickable:!1,redrawWhenMove:!0},_beziers:[],_controls:[],_indexes:[],_animid:null,initialize:function(t){L.CanvasLayer.prototype.initialize.call(this,t)},onRemove:function(t){this.clear(),L.CanvasLayer.prototype.onRemove.call(this,t)},setData:function(t){this._data=t,this._update()},_update:function(){this._data&&(this._updateBeziers(),this._move())},_move:function(){this.stop(),this._reset();var t,e,i,n,a=this._map.getSize(),o=this._canvas.getContext("2d"),r=this._beziers,s=this;t=this.options.reverse?this._data.from:this._data.to;var l=function(){o.clearRect(0,0,a.x,a.y);for(var h=0;h<t.length;h++)s._indexes[h]===r[h].length&&(s._indexes[h]=1),e=r[h].slice(0,s._indexes[h]),o.lineWidth=0,o.strokeStyle=s._color(h,.15),s._line(o,e),i=r[h][s._indexes[h]],n=r[h][s._indexes[h]-1],s._flare(o,i,n,h),++s._indexes[h];s._animid=L.Util.requestAnimFrame(l,s)};this._animid=L.Util.requestAnimFrame(l,this)},_line:function(t,e){if(e&&!(e.length<1)){t.beginPath(),t.moveTo(e[0][0],e[0][1]);for(var i=1;i<e.length;i++)t.lineTo(e[i][0],e[i][1]);t.stroke(),t.closePath()}},_flare:function(t,e,i,n){var a=this._angle(e,i),o=this._flarePoints(e);t.save(),t.beginPath(),t.translate(e[0],e[1]),t.moveTo(0,0),t.rotate(a),t.moveTo(o[0].x-e[0],o[0].y-e[1]),t.lineTo(o[1].x-e[0],o[1].y-e[1]),t.lineTo(o[2].x-e[0],o[2].y-e[1]),t.fillStyle="rgba(0, 255, 255, 0.5)",t.fill(),t.beginPath(),t.arc(0,0,2,0,Math.PI,!0),t.fill(),t.restore()},_flarePoints:function(t){var e={},i={},n={},a={};return e.x=t[0]-2,n.x=t[0]+2,i.x=a.x=t[0],e.y=n.y=t[1],i.y=t[1]+20,a.y=t[1]-4,[e,i,n,a]},_angle:function(t,e){return t[0]===e[0]?t[1]>e[1]?Math.PI:0:t[1]===e[1]?t[0]<e[0]?-Math.PI/2:Math.PI/2:t[0]<e[0]?t[1]<e[1]?-Math.atan((e[0]-t[0])/(e[1]-t[1])):-Math.PI/2-Math.atan((e[1]-t[1])/(t[0]-e[0])):t[1]<e[1]?Math.atan((t[0]-e[0])/(e[1]-t[1])):Math.PI/2+Math.atan((t[1]-e[1])/(t[0]-e[0]))},_updateBeziers:function(){this._beziers=[],this._controls=[];var t,e,i=this._data.geo;this.options.reverse?(t=this._data.to,e=this._data.from):(t=this._data.from,e=this._data.to);for(var n,a,o,r,s=i[t],l=this._latLng2Screen(s[1],s[0]),h=0;h<e.length;h++)n=i[e[h]],a=this._latLng2Screen(n[1],n[0]),this.options.reverse?(o=this._controlPoint(a,l),r=this._bezier(a,o,l)):(o=this._controlPoint(l,a),r=this._bezier(l,o,a)),this._beziers.push(r),this._controls.push(o)},_bezier:function(t,e,i){for(var n,a,o,r=[],s=.75/Math.sqrt(Math.pow(t.x-i.x,2)+Math.pow(t.y-i.y,2)),l=0;1>=l;l+=s)n=Math.pow(1-l,2)*t.x+2*l*(1-l)*e.x+Math.pow(l,2)*i.x,a=Math.pow(1-l,2)*t.y+2*l*(1-l)*e.y+Math.pow(l,2)*i.y,r.length>0&&(o=r[r.length-1],o[0]===n&&o[1]===a)||r.push([n,a]);return((o=r[r.length-1])[0]!==i.x||o[1]!==i.y)&&r.push([i.x,i.y]),r},_gradient:function(t,e,i,n,a){var o=t.createRadialGradient(e[0],e[1],0,e[0],e[1],i);return o.addColorStop(0,"rgba(255, 255, 255, 0.9)"),o.addColorStop(.75,"rgba(255, 255, 255, 0.75)"),o.addColorStop(1,this._color(n,a)),o},_color:function(t,e){var i=this._data.colors;return"rgba("+i[t%i.length].concat(e).join(",")+")"},_reset:function(){var t;t=this.options.reverse?this._data.from:this._data.to;for(var e=0;e<t.length;e++)this._indexes[e]=1},stop:function(){this._animid&&(L.Util.cancelAnimFrame(this._animid),this._animid=null);var t=this._map.getSize();this._canvas.getContext("2d").clearRect(0,0,t.x,t.y)},clear:function(){this.stop(),this._data=null}}),L.CanvasLayer.movingCircle=function(t){return new L.CanvasLayer.MovingCircle(t)},L.CanvasLayer.AnimateCircle=L.CanvasLayer.extend({options:{reverse:!1,clickable:!1,redrawWhenMove:!0},_rs:[],_first:[],_animid:null,initialize:function(t){L.CanvasLayer.prototype.initialize.call(this,t)},onRemove:function(t){this.clear(),L.CanvasLayer.prototype.onRemove.call(this,t)},_update:function(){this._data&&this._animate()},_animate:function(){this.stop(),this._reset();var t,e,i,n,a,o,r,s=this._map.getSize(),l=this._canvas.getContext("2d"),h=this._data.geo,c=this,u=5,f=!1;this.options.reverse?(t=this._data.to,e=this._data.from):(t=this._data.from,e=this._data.to);var d=function(){i=h[t],n=c._latLng2Screen(i[1],i[0]),f?5>=u?f=!1:u-=.1:10>u?u+=.1:f=!0,(r=l.createRadialGradient(n.x,n.y,0,n.x,n.y,u)).addColorStop(0,"rgba(255, 51, 51, 1)"),r.addColorStop(.85,"rgba(255, 51, 51, 0.75)"),r.addColorStop(1,"rgba(255, 255, 255, 0.25)"),l.clearRect(0,0,s.x,s.y),l.fillStyle=r,l.beginPath(),l.arc(n.x,n.y,u,0,2*Math.PI),l.fill();for(var p=0;p<e.length;p++)i=h[e[p]],n=c._latLng2Screen(i[1],i[0]),o=c._radius(e[p]),c._rs[p]<o?c._rs[p]+=.2:(c._rs[p]=0,c._first[p]=!1),a=c._rs[p],15>a&&!c._first[p]&&(r=c._gradient(l,n,o-.2*a,p,.25-.01*a,.8-.05*a),c._circle(l,r,n,o-.2*a)),r=c._gradient(l,n,a,p,.25,.8),c._circle(l,r,n,a);c._animid=L.Util.requestAnimFrame(d,c)};this._animid=L.Util.requestAnimFrame(d,this)},_circle:function(t,e,i,n){t.fillStyle=e,t.beginPath(),t.arc(i.x,i.y,n,0,2*Math.PI),t.fill()},_gradient:function(t,e,i,n,a,o){var r=t.createRadialGradient(e.x,e.y,0,e.x,e.y,i);return r.addColorStop(0,"rgba(0, 0, 0, 0)"),r.addColorStop(.25,"rgba(0, 0, 0, 0)"),r.addColorStop(.85,this._color(n,a)),r.addColorStop(1,this._color(n,o)),r},_color:function(t,e){var i=this._data.colors;return"rgba("+i[t%i.length].concat(e).join(",")+")"},_radius:function(t){var e=this._data.count;return 10+Math.round(30*(e[t]-e.min)/(e.max-e.min))},_reset:function(){var t;t=this.options.reverse?this._data.from:this._data.to;for(var e=0;e<t.length;e++)this._rs[e]=0,this._first[e]=!0},stop:function(){this._animid&&(L.Util.cancelAnimFrame(this._animid),this._animid=null);var t=this._map.getSize();this._canvas.getContext("2d").clearRect(0,0,t.x,t.y)},clear:function(){this.stop(),this._data=null}}),L.CanvasLayer.animateCircle=function(t){return new L.CanvasLayer.AnimateCircle(t)},L.TileLayer.EsriTileLayer=L.TileLayer.extend({initialize:function(t,e){t+="/tile/{z}/{y}/{x}",L.TileLayer.prototype.initialize.call(this,t,e)}}),L.tileLayer.esriTileLayer=function(t,e){return new L.TileLayer.EsriTileLayer(t,e)}},function(t,e){var i=[35.63452,109.132287],n=[],a={colors:["#e73336","#dbe900","#00e92f","#00e6ff","#0050ff"].reverse(),init:function(){this._map(),this._data2()},_map:function(){this.map=L.map("map",{center:i,zoom:5,minZoom:1,maxZoom:16,attributionControl:!1});L.tileLayer.esriTileLayer("http://map.geoq.cn/ArcGIS/rest/services/ChinaOnlineStreetPurplishBlue/MapServer",{opacity:1,zIndex:0}).addTo(this.map);var t=L.control.attribution();t.addAttribution("那些我去过的城市"),t.addAttribution('<a href="http://giscafer.com" target="_blank">@giscafer</a>'),t.addTo(this.map)},_data:function(){var t=this.util,e=this;t.getText("data/data.txt",function(i){var n=t.csv(i),a=e._parse(n);e._points(a),e._flow(a)},function(t){alert("数据下载失败!")})},_data2:function(){var t=this;this.util.getText("data/data.json?v="+(new Date).getTime(),function(e){e=JSON.parse(e),n=e.rows;var i=t._parse(e);t._points(i),t._flow(i)},function(t){alert("数据下载失败!")})},_parse:function(t){for(var e,n,a,o,r,s=t.rows,l={from:"中国",to:[],geo:{},count:{},colors:[],countries:[]},h=-1/0,c=1/0,u=s.length,f=0;u>f;f++)e=s[f],n=e.city,r=+e.times,a=+e.X_COORD,o=+e.Y_COORD,50>f&&(c>r&&(c=r),r>h&&(h=r),l.to.push(n),l.count[n]=r),l.geo[n]=[a,o],l.countries.push(n);return l.geo[l.from]=i,l.colors=this.util.gradient(this.colors,50),l.count.min=c,l.count.max=h,l},_points:function(t){for(var e,i,n=t.countries,a=0,o=n.length;o>a;a++){e=t.geo[n[a]];var r=getCityData(n[a]),s=r.imgs||[],l=generatePicHtml(r.city,s);i=L.latLng(e[1],e[0]),L.circleMarker(i,{color:"#ffc32c",opacity:0,weight:1,fillColor:"#ffc32c",fillOpacity:1}).setRadius(3).addTo(this.map);var h=L.icon({iconUrl:"./lib/leaflet-0.7.3/images/marker-icon.png",iconAnchor:[20,20]});L.marker(i,{color:"#ffc32c",opacity:0,weight:1,fillColor:"#ffc32c",fillOpacity:1,icon:h}).addTo(this.map).bindPopup("<h3>"+r.city+"</h3>"+r.date+"<br>"+r.remark+"<br>"+l)}},_flow:function(t){var e=(new L.CanvasLayer.flow).addTo(this.map),i=((new L.CanvasLayer.movingCircle).addTo(this.map),(new L.CanvasLayer.animateCircle).addTo(this.map));e.on("flowend",function(t){i.setData(t.data)}),e.setData(t)},_visit:function(){this.util.get("proxy.jsp?http://media.geoq.cn/media/geoq.do?handler=map&opt=visit&appid=e3b6b43a-1a5f-4a47-bf72-ec1436ced686&platform=mobile")},iframe:function(){var t=document.createElement("iframe");t.setAttribute("width","0"),t.setAttribute("height","0"),t.setAttribute("src","http://www.geoq.cn/baidumedia.html?appid=e3b6b43a-1a5f-4a47-bf72-ec1436ced686"),t.style.display="none",document.body.appendChild(t)}};a.util={get:function(t,e,i){var n=new XMLHttpRequest,a=this;return n.open("GET",t,!0),n.send(null),n.onload=function(t){var i=t.target.responseText;"function"==typeof e&&e.call(a,JSON.parse(i))},n.onerror=function(t){"function"==typeof i&&i.call(a,t)},n},getText:function(t,e,i,n){var a=new XMLHttpRequest,o=this;return a.open("GET",t,!0),a.send(null),a.onload=function(t){var i=t.target.responseText;e.call(o,i)},a.onerror=function(t){"function"==typeof i&&i.call(o,t)},a.onprogress=function(t){"function"==typeof n&&t.lengthComputable&&n.call(o,t)},a},csv:function(t){if(!t)return null;var e=t.split("\n");if(!e||e.length<2)return null;for(var i=e.shift().split(","),n=[],a=0;a<i.length;a++)i[a]=i[a].trim().replace("\n","").replace("\r","");for(var o=0,r=e.length;r>o;o++)if(""!==e[o].trim()){var s=e[o].split(","),l={};for(a=0;a<i.length;a++){var h=s[a];h?h.indexOf("\r")>-1&&(h=h.replace("\r","")):h="",l[i[a]]=h.trim()}n.push(l)}return{fields:i,rows:n}},gradient:function(t,e){for(var i=[],n=0;n<t.length;n++)i.push(this.hex2rgb(t[n]));if(e<=i.length)return i.slice(0,e);for(var a,o,r,s=i.length,l=[i[0]],h=1;e-1>h;h++)a=Math.floor(h*(s-1)/(e-1)),o=h*(s-1)/(e-1)-a,r=this._color(i[a],i[a+1],o),l.unshift(r);return l.unshift(i[s-1]),l},_color:function(t,e,i){return[Math.round(t[0]+(e[0]-t[0])*i),Math.round(t[1]+(e[1]-t[1])*i),Math.round(t[2]+(e[2]-t[2])*i)]},hex2rgb:function(t){var e={0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,A:10,B:11,C:12,D:13,E:14,F:15},i=[];return"string"==typeof t&&/^#[0-9A-F]{3,6}$/.test(t.toUpperCase())&&(t=t.slice(1).toUpperCase(),3===t.length?i=[16*e[t[0]]+e[t[0]],16*e[t[1]]+e[t[1]],16*e[t[2]]+e[t[2]]]:6===t.length&&(i=[16*e[t[0]]+e[t[1]],16*e[t[2]]+e[t[3]],16*e[t[4]]+e[t[5]]])),i}},L.DomEvent.on(document,"DOMContentLoaded",function(){a.init(),a.iframe()}),window.getCityData=function(t){for(let i=0;i<n.length;i++){var e=n[i];if(e.city===t)return e}},window.viewPic=function(t){getCityData(t);var e=document.getElementById("galley"),i=new Viewer(e,{url:"data-original",hidden:function(){i.destroy()}});i.show()},window.generatePicHtml=function(t,e){for(var i='<div id="galley"><ul class="pictures" onclick="viewPic(\''+t+"')\">",n=0;n<e.length;n++){var a="./data/pictures/"+e[n],o='style="display:inline-block"';n>5&&(o='style="display:none"'),i+="<li "+o+'><img data-original="'+a+'" src="'+a+'" alt="图片预览"></li>'}return i+="</ul></div></div>"}}],[0]);